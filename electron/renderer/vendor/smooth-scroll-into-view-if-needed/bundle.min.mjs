var _=e=>typeof e=="object"&&e!=null&&e.nodeType===1,$=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",G=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let n=getComputedStyle(e,null);return $(n.overflowY,t)||$(n.overflowX,t)||(i=>{let s=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!s&&(s.clientHeight<i.scrollHeight||s.clientWidth<i.scrollWidth)})(e)}return!1},S=(e,t,n,i,s,o,d,l)=>o<e&&d>t||o>e&&d<t?0:o<=e&&l<=n||d>=t&&l>=n?o-e-i:d>t&&l<n||o<e&&l>n?d-t+s:0,le=e=>e.parentElement??(e.getRootNode().host||null),ee=(e,t)=>{var n,i,s,o;if(typeof document>"u")return[];let{scrollMode:d,block:l,inline:c,boundary:m,skipOverflowHiddenElements:h}=t,w=typeof m=="function"?m:E=>E!==m;if(!_(e))throw new TypeError("Invalid target");let T=document.scrollingElement||document.documentElement,v=[],a=e;for(;_(a)&&w(a);){if(a=le(a),a===T){v.push(a);break}a!=null&&a===document.body&&G(a)&&!G(document.documentElement)||a!=null&&G(a,h)&&v.push(a)}let g=(i=(n=window.visualViewport)==null?void 0:n.width)!=null?i:innerWidth,y=(o=(s=window.visualViewport)==null?void 0:s.height)!=null?o:innerHeight,{scrollX:W,scrollY:H}=window,{height:M,width:k,top:x,right:q,bottom:A,left:C}=e.getBoundingClientRect(),u=l==="start"||l==="nearest"?x:l==="end"?A:x+M/2,f=c==="center"?C+k/2:c==="end"?q:C,F=[];for(let E=0;E<v.length;E++){let r=v[E],{height:D,width:I,top:L,right:N,bottom:z,left:O}=r.getBoundingClientRect();if(d==="if-needed"&&x>=0&&C>=0&&A<=y&&q<=g&&x>=L&&A<=z&&C>=O&&q<=N)return F;let X=getComputedStyle(r),Y=parseInt(X.borderLeftWidth,10),j=parseInt(X.borderTopWidth,10),R=parseInt(X.borderRightWidth,10),V=parseInt(X.borderBottomWidth,10),p=0,b=0,B="offsetWidth"in r?r.offsetWidth-r.clientWidth-Y-R:0,P="offsetHeight"in r?r.offsetHeight-r.clientHeight-j-V:0,K="offsetWidth"in r?r.offsetWidth===0?0:I/r.offsetWidth:0,Q="offsetHeight"in r?r.offsetHeight===0?0:D/r.offsetHeight:0;if(T===r)p=l==="start"?u:l==="end"?u-y:l==="nearest"?S(H,H+y,y,j,V,H+u,H+u+M,M):u-y/2,b=c==="start"?f:c==="center"?f-g/2:c==="end"?f-g:S(W,W+g,g,Y,R,W+f,W+f+k,k),p=Math.max(0,p+H),b=Math.max(0,b+W);else{p=l==="start"?u-L-j:l==="end"?u-z+V+P:l==="nearest"?S(L,z,D,j,V+P,u,u+M,M):u-(L+D/2)+P/2,b=c==="start"?f-O-Y:c==="center"?f-(O+I/2)+B/2:c==="end"?f-N+R+B:S(O,N,I,Y,R+B,f,f+k,k);let{scrollLeft:U,scrollTop:Z}=r;p=Math.max(0,Math.min(Z+p/Q,r.scrollHeight-D/Q+P)),b=Math.max(0,Math.min(U+b/K,r.scrollWidth-I/K+B)),u+=Z-p,f+=U-b}F.push({el:r,top:p,left:b})}return F},re=e=>typeof e=="object"&&typeof e.behavior=="function",ie=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function te(e,t){if(!e.isConnected||!e.ownerDocument.documentElement.contains(e))return;if(re(t))return t.behavior(ee(e,t));let n=typeof t=="boolean"||t==null?void 0:t.behavior;for(let{el:i,top:s,left:o}of ee(e,ie(t)))i.scroll({top:s,left:o,behavior:n})}var J,ne=()=>(J||(J="performance"in window?performance.now.bind(performance):Date.now),J());function oe(e){let t=ne(),n=Math.min((t-e.startTime)/e.duration,1),i=e.ease(n),s=e.startX+(e.x-e.startX)*i,o=e.startY+(e.y-e.startY)*i;e.method(s,o,n,i),s!==e.x||o!==e.y?requestAnimationFrame(()=>oe(e)):e.cb()}function se(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:h=>1+--h*h*h*h*h,o=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,l=e,c=e.scrollLeft,m=e.scrollTop;oe({scrollable:l,method:(h,w,T,v)=>{let a=Math.ceil(h),g=Math.ceil(w);e.scrollLeft=a,e.scrollTop=g,d?.({target:e,elapsed:T,value:v,left:a,top:g})},startTime:ne(),startX:c,startY:m,x:t,y:n,duration:i,ease:s,cb:o})}var ae=e=>e&&!e.behavior||e.behavior==="smooth",de=function(e,t){let n=t||{};return ae(n)?te(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,skipOverflowHiddenElements:n.skipOverflowHiddenElements,behavior:i=>Promise.all(i.reduce((s,o)=>{let{el:d,left:l,top:c}=o,m=d.scrollLeft,h=d.scrollTop;return m===l&&h===c?s:[...s,new Promise(w=>se(d,l,c,n.duration,n.ease,()=>w({el:d,left:[m,l],top:[h,c]}),n.onScrollChange))]},[]))}):Promise.resolve(te(e,t))};export{de as default};